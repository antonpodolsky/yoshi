<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.54">


<title data-react-helmet="true">Editor Flow Overview | Yoshi Universe</title>

<meta data-react-helmet="true" name="docsearch:version" content="4.x"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Editor Flow Overview | Yoshi Universe"><meta data-react-helmet="true" name="description" content="- [Overview](#overview)"><meta data-react-helmet="true" property="og:description" content="- [Overview](#overview)"><meta data-react-helmet="true" property="og:url" content="https://wix.github.io/yoshi/docs/editor-flow/overview">

<link data-react-helmet="true" rel="shortcut icon" href="/yoshi/img/favicon.ico">


<link rel="stylesheet" href="/yoshi/styles.88ffd49c.css">


<link rel="preload" href="/yoshi/styles.efa1fafb.js" as="script">

<link rel="preload" href="/yoshi/runtime~main.99a9f2a1.js" as="script">

<link rel="preload" href="/yoshi/main.ebbd7edd.js" as="script">

<link rel="preload" href="/yoshi/1.62d6909c.js" as="script">

<link rel="preload" href="/yoshi/2.21f05df8.js" as="script">

<link rel="preload" href="/yoshi/3.489281cf.js" as="script">

<link rel="preload" href="/yoshi/1be78505.7a7f9c2c.js" as="script">

<link rel="preload" href="/yoshi/5029540b.0ee86129.js" as="script">

<link rel="preload" href="/yoshi/17896441.824aadf1.js" as="script">

<link rel="preload" href="/yoshi/04df3a6d.4074dc85.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top navbarHideable_OaSq"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/yoshi/"><img class="navbar__logo" src="/yoshi/img/yoshi.png" alt="Yoshi Logo"><strong class="navbar__title">Yoshi</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a activeclassname="navbar__link--active" class="navbar__item navbar__link">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/yoshi/docs/welcome">4.x</a></li><li><a class="dropdown__link" href="/yoshi/docs/3.x/api/configuration/">3.x</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a activeclassname="navbar__link--active" class="navbar__item navbar__link">Flows</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/yoshi/docs/app-flow">App Flow</a></li><li><a class="dropdown__link" href="/yoshi/docs/library-flow">Library Flow</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/yoshi/docs/editor-flow/overview">Editor Flow</a></li><li><a class="dropdown__link" href="/yoshi/docs/business-manager-flow">BM Flow</a></li><li><a class="dropdown__link" href="/yoshi/docs/legacy-flow">Legacy Flow</a></li></ul></div><a class="navbar__item navbar__link" href="/yoshi/docs/yoshi-server/getting-started">Yoshi Server</a><a class="navbar__item navbar__link" href="/yoshi/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/yoshi/versions">Versions</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/wix/yoshi" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/yoshi/"><img class="navbar__logo" src="/yoshi/img/yoshi.png" alt="Yoshi Logo"><strong class="navbar__title">Yoshi</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a activeclassname="navbar__link--active" class="menu__link menu__link--sublist" position="left">Docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/yoshi/docs/welcome">4.x</a></li><li class="menu__list-item"><a class="menu__link" href="/yoshi/docs/3.x/api/configuration/">3.x</a></li></ul></li><li class="menu__list-item"><a activeclassname="navbar__link--active" class="menu__link menu__link--sublist" position="left">Flows</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/yoshi/docs/app-flow">App Flow</a></li><li class="menu__list-item"><a class="menu__link" href="/yoshi/docs/library-flow">Library Flow</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/yoshi/docs/editor-flow/overview">Editor Flow</a></li><li class="menu__list-item"><a class="menu__link" href="/yoshi/docs/business-manager-flow">BM Flow</a></li><li class="menu__list-item"><a class="menu__link" href="/yoshi/docs/legacy-flow">Legacy Flow</a></li></ul></li><li class="menu__list-item"><a class="menu__link" position="left" href="/yoshi/docs/yoshi-server/getting-started">Yoshi Server</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/yoshi/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" position="right" href="/yoshi/versions">Versions</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/wix/yoshi" class="menu__link" position="right">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><a tabindex="-1" class="sidebarLogo_3ono" href="/yoshi/"><img src="/yoshi/img/yoshi.png" alt="Yoshi Logo"><strong>Yoshi</strong></a><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/yoshi/docs/editor-flow/overview">Editor Flow</a></li><li class="menu__list-item"><a class="menu__link" href="/yoshi/docs/editor-flow/dev-center-registration">Dev Center Registration</a></li><li class="menu__list-item"><a class="menu__link" href="/yoshi/docs/editor-flow/migration-guide">Migration Guide</a></li><li class="menu__list-item"><a class="menu__link" href="/yoshi/docs/editor-flow/editor-and-settings-apps">Serving editor apps</a></li><li class="menu__list-item"><a class="menu__link" href="/yoshi/docs/editor-flow/platform-apps-support">Platform Apps Support</a></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><div><span class="badge badge--secondary">Version: 4.x</span></div><header><h1 class="docTitle_1vWb">Editor Flow Overview</h1></header><div class="markdown"><ul><li><a href="#overview">Overview</a></li><li><a href="#initial-setup">Initial Setup</a></li><li><a href="#local-development">Local Development</a></li><li><a href="#testing">Testing</a><ul><li><a href="#viewer-app">Viewer App</a><ul><li><a href="#e2e-against-production">E2E Against Production</a></li><li><a href="#ssr">SSR</a></li></ul></li><li><a href="#editor-app--settings-panel">Editor App &amp; Settings Panel</a><ul><li><a href="#e2e-against-locally-served-htmls">E2E Against Locally Served HTMLs</a></li></ul></li><li><a href="#component--unit-tests">Component &amp; Unit Tests</a></li></ul></li><li><a href="#deployment">Deployment</a><ul><li><a href="#register-an-app-in-wix-s-dev-center">Register an App in Wix&#x27;s Dev Center</a></li><li><a href="#deploy-a-new-version">Deploy a new version</a></li></ul></li><li><a href="#ooi-development-app">OOI Development App</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="overview"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#overview" title="Direct link to heading">#</a>Overview</h2><blockquote><p>If you already has OOI experience and understand how it&#x27;s working, just pass it to Local Development section.</p></blockquote><p><code>out-of-iframe</code> is a code name for a platform that enables creating Wix Apps that lives in the Viewer&#x27;s main frame. It&#x27;s similar to the old TPA but should be more performant. For more information head to the <a href="https://bo.wix.com/wix-docs/client/client-frameworks#out-of-iframe">official docs</a>.</p><p>For more info about current flow, take a look at the <a href="https://github.com/wix/yoshi/issues/1489">RFC</a></p><p><strong>OOI app is constructed from 2 parts:</strong></p><ul><li><p><strong>Viewer</strong></p><blockquote><p>Can include single or multple widgets. For example, component with list of items and item page.
Each widget contains of component (view) and controller (logic, runs on webWorker). All controllers are being collected in a single file called <code>viewerScript</code>.
So the result will be <code>[:widgetName]ViewerWidget.js</code> (for ex <code>buttonViewerWidget</code>) for each widget and single <code>viewerScript.js</code> for the whole app. These files is located in <code>dist/statics</code> directory.</p></blockquote></li><li><p><strong>Editor</strong></p><blockquote><p>To preview viewer script in editor, it&#x27;s not enough to provide viewerWidget. Currently platoform will create an iframe for you widget. So instead of js bundle, you have to prodive html file. It should be deprecated in future.
Moreover, each of you widget should have Settings app. Here, you can provide ability for users to configure your widget. (color, logic, labels, etc).
The result will be <code>editor.html</code> and <code>settings.html</code> for each of your widgets located in <code>dist/statics/editor/:widgetName.html</code> and <code>dist/statics/settings/:widgetName.html</code>.</p></blockquote></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="initial-setup"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#initial-setup" title="Direct link to heading">#</a>Initial Setup</h2><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">create-yoshi-app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Your Name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Your Email</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Editor FLow</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Typescript or Babel</span></div></div></div></div></div><blockquote><p>Note: We will use .ts files as an example, but you can use .js ones if you picked Babel project</p></blockquote><p>This will bootstrap project with simple components (button, text).
Each component should contain 3 files:</p><ul><li>Widget.ts - <em>Will be rendered in both viewer and editor</em>.</li><li>controller.ts - <em>Logical part of your widget running in WebWorker</em></li><li>Settings.ts - <em>Settings pannel for widget in editor</em>.</li></ul><hr><p><strong>Configure chrome to allow invalid certificates for resources loaded from localhost</strong></p><blockquote><p>The viewer is running on <code>https</code>, thus we need to serve our application on <code>https</code> as well. Yoshi is using a self signed certificate which is <code>invalid</code> for chrome.</p></blockquote><p>Paste the following in Chrome&#x27;s omnibox and change the highlighted flag from <code>Disabled</code> to <code>Enabled</code>.:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">chrome://flags/#allow-insecure-localhost</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="local-development"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#local-development" title="Direct link to heading">#</a>Local Development</h2><p><strong>Develop your local app on production platforms</strong></p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">npm start</span></div></div></div></div></div><p>This command runs <code>yoshi-flow-editor start</code> and opens two tabs:</p><ol><li><p>Production <strong>viewer</strong> with a site that has the <a href="#ooi-development-app">ooi development app</a>, it points to your local <em>viewer script</em> and <em>viewer widget</em>.</p></li><li><p>Production <strong>editor</strong> with a site that has the <a href="#ooi-development-app">ooi development app</a>, It points to your local <em>editor app</em> and <em>settings panel</em>.</p></li></ol><blockquote><p>Note: ooi-development-app is just an informative way to show how you can start your app in production environment. It&#x27;s a pre-registered wix website with installed app pointed to localhost.
After understanding basic concept, we recommend you to read <a href="#dev-center-registration">Dev-Center registraion section</a> and register your app.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="dev-center-registration"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#dev-center-registration" title="Direct link to heading">#</a>Dev-Center registration</h2><p>To register your app please read: <a href="/yoshi/docs/editor-flow/dev-center-registration">Register your app via Dev Center</a></p><p>#####After your app is registered</p><ul><li>update viewer and editor urls under <code>dev/sites.js</code></li><li>create/update <code>.component.json</code> which is located in each component&#x27;s directory. This file should contain <code>id</code> field, which is pointing to appropriate widget registered on dev center.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="testing"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#testing" title="Direct link to heading">#</a>Testing</h2><p>Run <code>npm start</code>, open another terminal and run <code>npx jest --watch</code></p><blockquote><p>Tip - If you are using <code>iterm2</code> use <code>cmd</code>+<code>d</code> to split the window vertically</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="viewer-app"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#viewer-app" title="Direct link to heading">#</a>Viewer App</h3><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="e2e-against-production"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#e2e-against-production" title="Direct link to heading">#</a>E2E Against Production</h4><p>Using the ooi development app that points to your local <em>viewer script</em> and <em>viewer widget</em>.</p><p>See <a href="https://github.com/wix/yoshi/tree/master/packages/create-yoshi-app/templates/out-of-iframe/typescript/src/viewerApp/viewerApp.e2e.js"><code>viewerApp/viewerApp.e2e.js</code></a> for an example.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="ssr"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#ssr" title="Direct link to heading">#</a>SSR</h4><blockquote><p>TBD</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="editor-app--settings-panel"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#editor-app--settings-panel" title="Direct link to heading">#</a>Editor App &amp; Settings Panel</h3><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="e2e-against-locally-served-htmls"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#e2e-against-locally-served-htmls" title="Direct link to heading">#</a>E2E Against Locally Served HTMLs</h4><p>When running tests, Yoshi runs your <a href="https://github.com/wix/yoshi/tree/master/packages/create-yoshi-app/templates/out-of-iframe/typescript/dev/server.js"><code>dev/server.js</code></a> as configured in <a href="https://github.com/wix/yoshi/tree/master/packages/create-yoshi-app/templates/out-of-iframe/typescript/jest-yoshi.config.js"><code>jest-yoshi.config.js</code></a>.</p><p>See <a href="https://github.com/wix/yoshi/tree/master/packages/create-yoshi-app/templates/out-of-iframe/typescript/src/editorApp/editorApp.e2e.js"><code>editorApp/editorApp.e2e.js</code></a> &amp; <a href="https://github.com/wix/yoshi/tree/master/packages/create-yoshi-app/templates/out-of-iframe/typescript/src/settingsPanel/settingsPanel.e2e.js"><code>settingsPanel/settingsPanel.e2e.js</code></a> for an example.</p><blockquote><p>Testing against the production editor similarly to the viewer app is problematic due to the editor loading time and required authentication.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="component--unit-tests"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#component--unit-tests" title="Direct link to heading">#</a>Component &amp; Unit Tests</h3><p>Nothing special about the ooi platform, component tests should be written in the <code>components</code> directory. Unit tests can be written everywhere.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/wix/yoshi/edit/master/website/versioned_docs/version-4.x/editor-flow/overview.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-05-12T10:28:28.000Z" class="docLastUpdatedAt_1sqk">5/12/2020</time> by <strong>Yaniv Efraim</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/yoshi/docs/editor-flow/dev-center-registration"><div class="pagination-nav__link--sublabel">Next</div><div class="pagination-nav__link--label">Dev Center Registration »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#overview" class="contents__link">Overview</a></li><li><a href="#initial-setup" class="contents__link">Initial Setup</a></li><li><a href="#local-development" class="contents__link">Local Development</a></li><li><a href="#dev-center-registration" class="contents__link">Dev-Center registration</a></li><li><a href="#testing" class="contents__link">Testing</a><ul><li><a href="#viewer-app" class="contents__link">Viewer App</a></li><li><a href="#editor-app--settings-panel" class="contents__link">Editor App &amp; Settings Panel</a></li><li><a href="#component--unit-tests" class="contents__link">Component &amp; Unit Tests</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/yoshi/docs/welcome">Get Started</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/yoshi/blog">Blog</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 Wix.com, Built with Docusaurus.</div></div></div></footer>
</div>

<script src="/yoshi/styles.efa1fafb.js"></script>

<script src="/yoshi/runtime~main.99a9f2a1.js"></script>

<script src="/yoshi/main.ebbd7edd.js"></script>

<script src="/yoshi/1.62d6909c.js"></script>

<script src="/yoshi/2.21f05df8.js"></script>

<script src="/yoshi/3.489281cf.js"></script>

<script src="/yoshi/1be78505.7a7f9c2c.js"></script>

<script src="/yoshi/5029540b.0ee86129.js"></script>

<script src="/yoshi/17896441.824aadf1.js"></script>

<script src="/yoshi/04df3a6d.4074dc85.js"></script>


</body>
</html>